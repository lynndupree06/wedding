<%= render 'common/guest_summary' %>

<%= link_to 'New Guest', new_guest_path %>

<h1>Listing guests <span class="label label-info"><%= @guests.size %></span></h1>

<table class="table table-hover">
  <thead>
  <tr>
    <th>Last name</th>
    <th>First name</th>
    <th>Gender</th>
    <th>A/B</th>
    <th>Party</th>
    <th>Group(s)</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @guests.order(:last_name).each do |guest| %>
      <tr>
        <td>
          <%= guest.last_name %>
          <% unless guest.suffix.blank? %>, <%= guest.suffix %>
          <% end %>
        </td>
        <td><%= guest.title %> <%= guest.first_name %></td>
        <td><%= guest.gender %></td>
        <td><%= guest.a_b_list %></td>
        <td><%= guest.party ? guest.party.name : '' %></td>
        <td>
          <% guest.group.each do |g| %>
              <% if g.name.include? 'Bride' %>
                  <span class="label label-danger"><%= g.name %></span>
              <% elsif g.name.include? 'Groom' %>
                  <span class="label label-info"><%= g.name %></span>
              <% elsif g.name.include? 'Bridal' %>
                  <span class="label label-warning"><%= g.name %></span>
              <% end %>
          <% end %>
        </td>
        <td><%= link_to 'Show', guest %></td>
        <td><%= link_to 'Edit', edit_guest_path(guest) %></td>
        <td><%= link_to 'Destroy', guest, method: :delete, data: {confirm: 'Are you sure?'} %></td>
      </tr>
  <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Guest', new_guest_path %>


